<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Astral Void - Widget Discord</title>
    <style>
        body {
            background-color: #1e1f22;
            color: white;
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            padding: 20px;
        }
        .card {
            background-color: #2b2d31;
            border-radius: 16px;
            padding: 20px;
            width: 400px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .server-info {
            text-align: right;
        }
        .avatar {
            width: 64px;
            height: 64px;
            border-radius: 50%;
        }
        .description {
            margin: 15px 0;
            line-height: 1.4;
            word-wrap: break-word;
        }
        .badges {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }
        .badge {
            background-color: #232428;
            border-radius: 20px;
            padding: 4px 10px;
            font-size: 0.85em;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .members {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }
        .member {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 60px;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .member img {
            width: 48px;
            height: 48px;
            border-radius: 50%;
        }
        .member span {
            font-size: 0.7em;
            margin-top: 4px;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 60px;
        }
        .join-btn {
            background-color: #5865f2;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px;
            font-size: 1em;
            width: 100%;
            cursor: pointer;
            text-align: center;
        }
        .join-btn:hover {
            background-color: #4752c4;
        }
    </style>
</head>
<body>
    <div class="card">
        <div class="header">
            <img src="https://cdn.discordapp.com/icons/1351265144134696970/231d5f4318d601ad263bfc941f1ebd6f.png?size=80&quality=lossless" alt="Avatar" class="avatar">
            <div class="server-info">
                <h2>The Astral Void</h2>
                <p><span id="onlineCount">0</span> en ligne • <span id="totalCount">0</span> membres</p>
            </div>
        </div>
        <div class="description">
            🌙 Bienvenue dans un coin chill FR – Se détendre, discuter, jouer et rencontrer. 😌<br>
            🎮🔥 Mini-jeux pour s’amuser et se défier.<br>
            📂 Structure claire pour une navigation facile.<br>
            🤝 Esprit communautaire – On partage, on rigole, on vit ensemble.
        </div>
        <div class="badges">
            <div class="badge">🇫🇷 Communauté FR</div>
            <div class="badge">🌃 Chill</div>
            <div class="badge">🎮 Mini-jeux</div>
            <div class="badge">📂 Structure claire</div>
            <div class="badge">🤝Esprit communautaire</div>
        </div>
        <div class="members" id="membersList"></div>
        <button class="join-btn" onclick="window.open('https://discord.gg/BJ3pn5F5GS','_blank')">Rejoindre</button>
    </div>

    <script>
        async function loadWidget() {
            try {
                const res = await fetch('https://discord.com/api/guilds/1351265144134696970/widget.json');
                const data = await res.json();
                document.getElementById('onlineCount').textContent = data.presence_count;
                document.getElementById('totalCount').textContent = data.members.length;

                const membersDiv = document.getElementById('membersList');
                membersDiv.innerHTML = '';
                data.members.forEach(member => {
                    const div = document.createElement('div');
                    div.className = 'member';
                    div.innerHTML = `
                        <img src="${member.avatar_url}" alt="${member.username}">
                        <span title="${member.username}">${member.username}</span>
                    `;
                    membersDiv.appendChild(div);
                });

            } catch (e) {
                console.error('Erreur chargement widget', e);
            }
        }
        loadWidget();
        setInterval(loadWidget, 30000);
    </script>
</body>
</html>
